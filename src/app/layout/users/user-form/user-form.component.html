<div *ngIf="isLoaded && registerForm" class="w-100">
  <div class="d-flex">
    <h4 class="page-header">{{ title }} user</h4>
  </div>
  <div class="w-100">
    <div class="card w-100">
      <div class="d-flex justify-content-between">
        <span>
          <button routerLink="/users" mat-stroked-button><i class="fas fa-long-arrow-alt-left"></i></button>
        </span>
      </div>
      <form class="p-3" [formGroup]="registerForm">
        <ng-template matStepLabel>Fill out your personal data</ng-template>
        <div class="form-group row justify-content-center">
          <div class="col text-center">
            <mat-form-field appearance="outline" style="width: 100%">
              <mat-label>First Name</mat-label>
              <input formControlName="firstName" matInput required />
              <mat-error *ngIf="!getRegisterForm.firstName.value"> First name is required </mat-error>
            </mat-form-field>
          </div>
          <div class="col text-center">
            <mat-form-field appearance="outline" style="width: 100%">
              <mat-label>Last Name</mat-label>
              <input formControlName="lastName" matInput required />
              <mat-error *ngIf="!getRegisterForm.lastName.value"> Last name is required </mat-error>
            </mat-form-field>
          </div>
        </div>
        <div class="form-group row justify-content-center">
          <div class="col text-center">
            <mat-form-field appearance="outline" style="width: 100%">
              <mat-label>Email</mat-label>
              <input type="email" formControlName="email" matInput required />
              <mat-error *ngIf="!getRegisterForm.email.value"> Email is required </mat-error>
            </mat-form-field>
          </div>
          <div class="col text-center">
            <mat-form-field appearance="outline" style="width: 100%">
              <mat-label>Birth date</mat-label>
              <input [matDatepicker]="birthDatePicker" formControlName="birthDate" matInput required />
              <mat-datepicker-toggle [for]="birthDatePicker" matSuffix></mat-datepicker-toggle>
              <mat-datepicker #birthDatePicker></mat-datepicker>
            </mat-form-field>
          </div>
        </div>
        <div class="form-group row justify-content-center">
          <div class="col text-center">
            <mat-form-field appearance="outline" style="width: 100%">
              <mat-label>Start Work Date</mat-label>
              <input [matDatepicker]="startWorkDatePicker" formControlName="startWorkDate" matInput required />
              <mat-datepicker-toggle [for]="startWorkDatePicker" matSuffix></mat-datepicker-toggle>
              <mat-datepicker #startWorkDatePicker></mat-datepicker>
            </mat-form-field>
          </div>
        </div>
        <div *ngIf="isNew" class="form-group row justify-content-center">
          <div class="col text-center">
            <mat-form-field appearance="outline" style="width: 100%">
              <mat-label>Password</mat-label>
              <input
                #passwordWithValidation
                [type]="toggleVisibilityPass ? 'text' : 'password'"
                formControlName="newPassword"
                matInput
                required
              />
              <mat-hint align="end" aria-live="polite">
                {{ passwordWithValidation.value.length }} /
                {{ passwordComponentWithValidation.max }}
              </mat-hint>
              <mat-error *ngIf="!getRegisterForm.newPassword.value"> Password is required </mat-error>
              <mat-error *ngIf="getRegisterForm.newPassword.hasError('pattern')"> Password is not valid </mat-error>
            </mat-form-field>

            <mat-password-strength #passwordComponentWithValidation [password]="passwordWithValidation.value"> </mat-password-strength>

            <mat-password-strength-info *ngIf="toggle.checked" [passwordComponent]="passwordComponentWithValidation">
            </mat-password-strength-info>
            <button (click)="generateNewPassword()" class="mt-1" mat-raised-button>Generate New Password</button>
          </div>
          <div class="col-12 mt-4">
            <mat-slide-toggle #toggle>Show Password Details</mat-slide-toggle>
          </div>
        </div>
      </form>
      <div class="col-12 my-2 text-center">
        <button (click)="onSubmit()" class="btn submitButton" type="submit">{{ title }}</button>
      </div>
    </div>
  </div>
</div>
